<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¡å›­ç”Ÿæ´»åŠ©æ‰‹ - é«˜æ ¡å­¦ç”Ÿç”Ÿæ´»æœåŠ¡å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        /* å¤´éƒ¨æ ·å¼ */
        header {
            background: linear-gradient(135deg, #4a6fa5 0%, #2c3e50 100%);
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.6rem;
            font-weight: 700;
        }

        .logo-icon {
            margin-right: 10px;
            font-size: 1.8rem;
        }

        /* å¯¼èˆªæ ·å¼ */
        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        nav ul li a:hover, nav ul li a.active {
            background-color: rgba(255, 255, 255, 0.15);
        }

        /* ä¸»å†…å®¹åŒºæ ·å¼ */
        main {
            min-height: calc(100vh - 180px);
            padding: 30px 0;
        }

        .module {
            display: none;
        }

        .module.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .module-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eaeaea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .module-title {
            font-size: 1.8rem;
            color: #2c3e50;
            font-weight: 700;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: #4a6fa5;
            color: white;
        }

        .btn-primary:hover {
            background-color: #3a5985;
        }

        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
        }

        .btn-success:hover {
            background-color: #218838;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: #4a6fa5;
            outline: none;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* é€šçŸ¥æ¨¡å— */
        .notice-item {
            padding: 15px;
            border-left: 4px solid #4a6fa5;
            margin-bottom: 15px;
            background-color: #f9fafc;
        }

        .notice-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .notice-date {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .notice-content {
            color: #555;
            line-height: 1.6;
        }

        /* å¤±ç‰©æ‹›é¢†æ¨¡å— */
        .lost-found-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
            background-color: white;
        }

        .item-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .item-info h4 {
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .item-type {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-right: 10px;
        }

        .item-type.lost {
            background-color: #ffeaa7;
            color: #e17055;
        }

        .item-type.found {
            background-color: #a5d6a7;
            color: #2e7d32;
        }

        .contact-info {
            font-size: 0.9rem;
            color: #4a6fa5;
            margin-top: 5px;
        }

        /* äºŒæ‰‹äº¤æ˜“æ¨¡å— */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .product-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .product-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .product-img {
            height: 180px;
            background-color: #f1f3f5;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 3rem;
        }

        .product-body {
            padding: 15px;
        }

        .product-title {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .product-category {
            display: inline-block;
            padding: 3px 10px;
            background-color: #e8f4fd;
            color: #4a6fa5;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .product-desc {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* è¯¾è¡¨æŸ¥è¯¢æ¨¡å— */
        .timetable-search {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .search-form {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .timetable-container {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .timetable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
        }

        .week-nav {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timetable {
            width: 100%;
            border-collapse: collapse;
        }

        .timetable th {
            background-color: #4a6fa5;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
        }

        .timetable td {
            padding: 15px 10px;
            text-align: center;
            border: 1px solid #eee;
            vertical-align: top;
            height: 120px;
        }

        .course-item {
            background-color: #e8f4fd;
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 5px;
            border-left: 4px solid #4a6fa5;
        }

        .course-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .course-detail {
            font-size: 0.85rem;
            color: #555;
        }

        /* ç©ºçŠ¶æ€æç¤º */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #6c757d;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #bdc3c7;
        }

        /* é¡µè„šæ ·å¼ */
        footer {
            background-color: #2c3e50;
            color: #bdc3c7;
            padding: 25px 0;
            text-align: center;
            margin-top: 40px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            nav ul li {
                margin: 5px 10px;
            }
            
            .search-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .timetable {
                display: block;
                overflow-x: auto;
            }
            
            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">ğŸ“</div>
                    <h1>æ ¡å›­ç”Ÿæ´»åŠ©æ‰‹</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-module="notices">æ ¡å›­é€šçŸ¥</a></li>
                        <li><a href="#" class="nav-link" data-module="lostFound">å¤±ç‰©æ‹›é¢†</a></li>
                        <li><a href="#" class="nav-link" data-module="secondhand">äºŒæ‰‹äº¤æ˜“</a></li>
                        <li><a href="#" class="nav-link" data-module="timetable">è¯¾è¡¨æŸ¥è¯¢</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- æ ¡å›­é€šçŸ¥æ¨¡å— -->
            <section id="notices" class="module active">
                <div class="module-header">
                    <h2 class="module-title">æ ¡å›­é€šçŸ¥</h2>
                    <button class="btn btn-primary" id="addNoticeBtn">å‘å¸ƒæ–°é€šçŸ¥</button>
                </div>
                
                <div class="filter-group">
                    <select id="noticeSort" class="filter-select">
                        <option value="newest">æŒ‰å‘å¸ƒæ—¶é—´æ’åºï¼ˆæœ€æ–°ï¼‰</option>
                        <option value="oldest">æŒ‰å‘å¸ƒæ—¶é—´æ’åºï¼ˆæœ€æ—©ï¼‰</option>
                    </select>
                </div>
                
                <div id="noticesList">
                    <!-- é€šçŸ¥åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- å¤±ç‰©æ‹›é¢†æ¨¡å— -->
            <section id="lostFound" class="module">
                <div class="module-header">
                    <h2 class="module-title">å¤±ç‰©æ‹›é¢†</h2>
                    <div class="lost-found-actions">
                        <button class="btn btn-primary" id="addLostBtn">å‘å¸ƒä¸¢å¤±ä¿¡æ¯</button>
                        <button class="btn btn-success" id="addFoundBtn">å‘å¸ƒæ‹¾ç‰©ä¿¡æ¯</button>
                    </div>
                </div>
                
                <div class="filter-group">
                    <select id="itemTypeFilter" class="filter-select">
                        <option value="all">å…¨éƒ¨ç±»å‹</option>
                        <option value="card">å¡è¯ç±»</option>
                        <option value="electronic">ç”µå­äº§å“</option>
                        <option value="book">ä¹¦ç±æ–‡å…·</option>
                        <option value="clothing">è¡£ç‰©é¥°å“</option>
                        <option value="other">å…¶ä»–ç‰©å“</option>
                    </select>
                    
                    <select id="statusFilter" class="filter-select">
                        <option value="all">å…¨éƒ¨çŠ¶æ€</option>
                        <option value="lost">ä¸¢å¤±</option>
                        <option value="found">æ‹¾åˆ°</option>
                    </select>
                </div>
                
                <div id="lostFoundList">
                    <!-- å¤±ç‰©æ‹›é¢†åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- äºŒæ‰‹äº¤æ˜“æ¨¡å— -->
            <section id="secondhand" class="module">
                <div class="module-header">
                    <h2 class="module-title">äºŒæ‰‹äº¤æ˜“</h2>
                    <button class="btn btn-primary" id="addProductBtn">å‘å¸ƒå•†å“</button>
                </div>
                
                <div class="filter-group">
                    <select id="categoryFilter" class="filter-select">
                        <option value="all">å…¨éƒ¨åˆ†ç±»</option>
                        <option value="book">ä¹¦ç±èµ„æ–™</option>
                        <option value="electronic">ç”µå­äº§å“</option>
                        <option value="daily">ç”Ÿæ´»ç”¨å“</option>
                        <option value="clothing">æœè£…é‹å¸½</option>
                        <option value="other">å…¶ä»–</option>
                    </select>
                </div>
                
                <div class="product-grid" id="productList">
                    <!-- å•†å“åˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- è¯¾è¡¨æŸ¥è¯¢æ¨¡å— -->
            <section id="timetable" class="module">
                <div class="module-header">
                    <h2 class="module-title">è¯¾è¡¨æŸ¥è¯¢</h2>
                </div>
                
                <div class="timetable-search">
                    <div class="search-form">
                        <div class="form-group" style="flex: 1;">
                            <label for="studentId" class="form-label">å­¦å·/é€‰æ‹©å¹´çº§ä¸“ä¸š</label>
                            <input type="text" id="studentId" class="form-control" placeholder="è¯·è¾“å…¥å­¦å·æˆ–é€‰æ‹©å¹´çº§ä¸“ä¸š">
                        </div>
                        
                        <div class="form-group" style="flex: 1;">
                            <label for="majorSelect" class="form-label">å¹´çº§ä¸“ä¸š</label>
                            <select id="majorSelect" class="form-control">
                                <option value="">è¯·é€‰æ‹©å¹´çº§ä¸“ä¸š</option>
                                <option value="cs2021">è®¡ç®—æœºç§‘å­¦ 2021çº§</option>
                                <option value="cs2022">è®¡ç®—æœºç§‘å­¦ 2022çº§</option>
                                <option value="se2021">è½¯ä»¶å·¥ç¨‹ 2021çº§</option>
                                <option value="se2022">è½¯ä»¶å·¥ç¨‹ 2022çº§</option>
                                <option value="ai2021">äººå·¥æ™ºèƒ½ 2021çº§</option>
                                <option value="ai2022">äººå·¥æ™ºèƒ½ 2022çº§</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <button class="btn btn-primary" id="searchTimetable">æŸ¥è¯¢è¯¾è¡¨</button>
                        </div>
                    </div>
                </div>
                
                <div class="timetable-container">
                    <div class="timetable-header">
                        <div>
                            <h3 id="currentWeek">ç¬¬ 1 å‘¨è¯¾è¡¨</h3>
                            <p id="timetableInfo" class="contact-info"></p>
                        </div>
                        <div class="week-nav">
                            <button class="btn btn-secondary" id="prevWeek">ä¸Šä¸€å‘¨</button>
                            <button class="btn btn-secondary" id="nextWeek">ä¸‹ä¸€å‘¨</button>
                            <button class="btn btn-primary" id="currentWeekBtn">æœ¬å‘¨</button>
                        </div>
                    </div>
                    
                    <div id="timetableContent">
                        <!-- è¯¾è¡¨å†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- æ¨¡æ€æ¡†ï¼ˆç”¨äºè¡¨å•ï¼‰ -->
    <div id="modalOverlay" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background-color: white; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header" style="padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin: 0;" id="modalTitle">æ¨¡æ€æ¡†æ ‡é¢˜</h3>
                <button id="closeModal" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6c757d;">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;" id="modalBody">
                <!-- æ¨¡æ€æ¡†å†…å®¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Â© 2023 æ ¡å›­ç”Ÿæ´»åŠ©æ‰‹ - é«˜æ ¡å­¦ç”Ÿè½»é‡åŒ–ç”Ÿæ´»æœåŠ¡å·¥å…·</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">æœ¬å·¥å…·ä¸ºæœ¬åœ°åº”ç”¨ï¼Œæ•°æ®å­˜å‚¨äºæµè§ˆå™¨ä¸­ï¼Œè¯·å‹¿æ¸…é™¤æµè§ˆå™¨ç¼“å­˜</p>
        </div>
    </footer>

    <script>
        // æ•°æ®å­˜å‚¨ç»“æ„è®¾è®¡
        const StorageKeys = {
            NOTICES: 'campus_notices',
            LOST_FOUND: 'lost_found_items',
            SECONDHAND: 'secondhand_products',
            TIMETABLE: 'timetable_data',
            CURRENT_WEEK: 'current_week'
        };

        // åˆå§‹æ•°æ®
        const initialData = {
            notices: [
                {
                    id: 1,
                    title: "å…³äº2023å¹´ç§‹å­£å­¦æœŸå¼€å­¦å®‰æ’çš„é€šçŸ¥",
                    content: "æ ¹æ®å­¦æ ¡å®‰æ’ï¼Œ2023å¹´ç§‹å­£å­¦æœŸå°†äº9æœˆ4æ—¥æ­£å¼å¼€å­¦ã€‚è¯·å„ä½åŒå­¦æŒ‰æ—¶è¿”æ ¡ï¼Œå¹¶åšå¥½å¼€å­¦å‡†å¤‡å·¥ä½œã€‚å…·ä½“è¯¾ç¨‹å®‰æ’è¯·å…³æ³¨æ•™åŠ¡å¤„é€šçŸ¥ã€‚",
                    date: "2023-08-25 09:30",
                    publisher: "æ•™åŠ¡å¤„"
                },
                {
                    id: 2,
                    title: "å›¾ä¹¦é¦†ç³»ç»Ÿå‡çº§ç»´æŠ¤é€šçŸ¥",
                    content: "å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿå°†äº8æœˆ28æ—¥(å‘¨ä¸€) 00:00è‡³06:00è¿›è¡Œç³»ç»Ÿå‡çº§ç»´æŠ¤ï¼ŒæœŸé—´å›¾ä¹¦é¦†ç½‘ç«™ã€å€Ÿè¿˜ä¹¦ç³»ç»Ÿå°†æš‚åœæœåŠ¡ã€‚è¯·å„ä½è¯»è€…æå‰å®‰æ’å¥½å€Ÿé˜…è®¡åˆ’ã€‚",
                    date: "2023-08-24 14:15",
                    publisher: "å›¾ä¹¦é¦†"
                },
                {
                    id: 3,
                    title: "æ ¡å›­ç½‘æ— çº¿ç½‘ç»œä¼˜åŒ–å®Œæˆ",
                    content: "æ ¡å›­æ— çº¿ç½‘ç»œä¼˜åŒ–å‡çº§å·¥ä½œå·²å®Œæˆï¼Œç°å·²è¦†ç›–å…¨æ ¡ä¸»è¦æ•™å­¦æ¥¼ã€å›¾ä¹¦é¦†ã€é£Ÿå ‚åŠå®¿èˆåŒºåŸŸã€‚ä½¿ç”¨æŒ‡å—è¯·è®¿é—®ç½‘ç»œä¸­å¿ƒç½‘ç«™æŸ¥çœ‹ã€‚",
                    date: "2023-08-23 16:45",
                    publisher: "ç½‘ç»œä¸­å¿ƒ"
                }
            ],
            lostFound: [
                {
                    id: 1,
                    type: "lost",
                    itemName: "æ ¡å›­ä¸€å¡é€š",
                    itemCategory: "card",
                    description: "8æœˆ25æ—¥åœ¨äºŒé£Ÿå ‚é—å¤±ï¼Œå¡å·å°¾å·0321ï¼Œå§“åå¼ ä¸‰",
                    contact: "æåŒå­¦ 138****5678",
                    date: "2023-08-25 12:30",
                    location: "äºŒé£Ÿå ‚"
                },
                {
                    id: 2,
                    type: "found",
                    itemName: "é»‘è‰²åä¸ºæ‰‹æœº",
                    itemCategory: "electronic",
                    description: "8æœˆ24æ—¥åœ¨å›¾ä¹¦é¦†ä¸‰æ¥¼è‡ªä¹ å®¤æ‹¾åˆ°ï¼Œé»‘è‰²åä¸ºæ‰‹æœºï¼Œæœ‰è“è‰²æ‰‹æœºå£³",
                    contact: "ç‹åŒå­¦ 139****1234",
                    date: "2023-08-24 20:15",
                    location: "å›¾ä¹¦é¦†ä¸‰æ¥¼"
                },
                {
                    id: 3,
                    type: "lost",
                    itemName: "ã€Šæ•°æ®ç»“æ„ã€‹æ•™æ",
                    itemCategory: "book",
                    description: "8æœˆ23æ—¥åœ¨æ•™å­¦æ¥¼Aåº§302æ•™å®¤é—å¤±ï¼Œä¹¦å†…æœ‰å§“åå’Œå­¦å·",
                    contact: "èµµåŒå­¦ 137****9876",
                    date: "2023-08-23 18:45",
                    location: "æ•™å­¦æ¥¼Aåº§302"
                }
            ],
            secondhand: [
                {
                    id: 1,
                    name: "ä¹æˆæ–°Javaç¼–ç¨‹æ€æƒ³",
                    price: 35,
                    category: "book",
                    description: "ç¬¬äº”ç‰ˆï¼Œå‡ ä¹å…¨æ–°ï¼Œæ— ç¬”è®°æ— åˆ’ç—•ï¼Œé€‚åˆè®¡ç®—æœºä¸“ä¸šåŒå­¦",
                    contact: "åˆ˜åŒå­¦ 135****3344",
                    date: "2023-08-25",
                    image: "ğŸ“š"
                },
                {
                    id: 2,
                    name: "ä¾¿æºå¼è“ç‰™é”®ç›˜",
                    price: 80,
                    category: "electronic",
                    description: "é»‘è‰²ï¼Œå¯æŠ˜å ï¼Œé€‚åˆå¹³æ¿å’Œæ‰‹æœºä½¿ç”¨ï¼Œä½¿ç”¨ä¸åˆ°åŠå¹´",
                    contact: "é™ˆåŒå­¦ 136****5566",
                    date: "2023-08-24",
                    image: "âŒ¨ï¸"
                },
                {
                    id: 3,
                    name: " dormitoryå°ç¯",
                    price: 25,
                    category: "daily",
                    description: "LEDæŠ¤çœ¼å°ç¯ï¼Œä¸‰æ¡£è°ƒå…‰ï¼Œç™½è‰²ï¼ŒåŠŸèƒ½å®Œå¥½",
                    contact: "å­™åŒå­¦ 138****7788",
                    date: "2023-08-23",
                    image: "ğŸ’¡"
                }
            ],
            timetable: {
                "cs2021": {
                    name: "è®¡ç®—æœºç§‘å­¦ 2021çº§",
                    weeks: [
                        // ç¬¬1å‘¨
                        [
                            // å‘¨ä¸€
                            [
                                { name: "æ•°æ®ç»“æ„", teacher: "å¼ æ•™æˆ", classroom: "æ•™å­¦æ¥¼A201", time: "1-2èŠ‚" },
                                { name: "è®¡ç®—æœºç»„æˆåŸç†", teacher: "ææ•™æˆ", classroom: "æ•™å­¦æ¥¼B102", time: "3-4èŠ‚" }
                            ],
                            // å‘¨äºŒ
                            [
                                { name: "å¤§å­¦è‹±è¯­", teacher: "ç‹è€å¸ˆ", classroom: "å¤–è¯­æ¥¼305", time: "1-2èŠ‚" },
                                { name: "æ“ä½œç³»ç»Ÿ", teacher: "åˆ˜æ•™æˆ", classroom: "å®éªŒæ¥¼501", time: "5-6èŠ‚" }
                            ],
                            // å‘¨ä¸‰
                            [
                                { name: "ç®—æ³•è®¾è®¡ä¸åˆ†æ", teacher: "é™ˆæ•™æˆ", classroom: "æ•™å­¦æ¥¼A301", time: "3-4èŠ‚" }
                            ],
                            // å‘¨å››
                            [
                                { name: "æ•°æ®åº“åŸç†", teacher: "èµµæ•™æˆ", classroom: "æ•™å­¦æ¥¼B205", time: "1-2èŠ‚" },
                                { name: "ä½“è‚²", teacher: "å­™è€å¸ˆ", classroom: "ä½“è‚²é¦†", time: "5-6èŠ‚" }
                            ],
                            // å‘¨äº”
                            [
                                { name: "è®¡ç®—æœºç½‘ç»œ", teacher: "å‘¨æ•™æˆ", classroom: "å®éªŒæ¥¼402", time: "3-4èŠ‚" }
                            ],
                            // å‘¨å…­
                            [],
                            // å‘¨æ—¥
                            []
                        ],
                        // ç¬¬2å‘¨ï¼ˆç®€åŒ–ï¼Œå®é™…åº”æœ‰ä¸åŒï¼‰
                        [
                            [{ name: "æ•°æ®ç»“æ„", teacher: "å¼ æ•™æˆ", classroom: "æ•™å­¦æ¥¼A201", time: "1-2èŠ‚" }],
                            [{ name: "è®¡ç®—æœºç»„æˆåŸç†", teacher: "ææ•™æˆ", classroom: "æ•™å­¦æ¥¼B102", time: "3-4èŠ‚" }],
                            [{ name: "å¤§å­¦è‹±è¯­", teacher: "ç‹è€å¸ˆ", classroom: "å¤–è¯­æ¥¼305", time: "1-2èŠ‚" }],
                            [{ name: "æ“ä½œç³»ç»Ÿ", teacher: "åˆ˜æ•™æˆ", classroom: "å®éªŒæ¥¼501", time: "5-6èŠ‚" }],
                            [{ name: "ç®—æ³•è®¾è®¡ä¸åˆ†æ", teacher: "é™ˆæ•™æˆ", classroom: "æ•™å­¦æ¥¼A301", time: "3-4èŠ‚" }],
                            [],
                            []
                        ]
                    ]
                },
                "cs2022": {
                    name: "è®¡ç®—æœºç§‘å­¦ 2022çº§",
                    weeks: [
                        // ç¬¬1å‘¨
                        [
                            [{ name: "é«˜ç­‰æ•°å­¦", teacher: "æ¨æ•™æˆ", classroom: "æ•™å­¦æ¥¼C101", time: "1-2èŠ‚" }],
                            [{ name: "Cè¯­è¨€ç¨‹åºè®¾è®¡", teacher: "å´æ•™æˆ", classroom: "å®éªŒæ¥¼301", time: "3-4èŠ‚" }],
                            [{ name: "å¤§å­¦è‹±è¯­", teacher: "ç‹è€å¸ˆ", classroom: "å¤–è¯­æ¥¼305", time: "1-2èŠ‚" }],
                            [{ name: "ç¦»æ•£æ•°å­¦", teacher: "éƒ‘æ•™æˆ", classroom: "æ•™å­¦æ¥¼A102", time: "5-6èŠ‚" }],
                            [{ name: "ä½“è‚²", teacher: "å­™è€å¸ˆ", classroom: "ä½“è‚²é¦†", time: "3-4èŠ‚" }],
                            [],
                            []
                        ]
                    ]
                }
            }
        };

        // å·¥å…·å‡½æ•°ï¼šè·å–æœ¬åœ°å­˜å‚¨æ•°æ®
        function getStorageData(key, defaultValue = []) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        }

        // å·¥å…·å‡½æ•°ï¼šä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveStorageData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }

        // å·¥å…·å‡½æ•°ï¼šåˆå§‹åŒ–æ•°æ®
        function initializeData() {
            // æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆå§‹åŒ–
            if (!localStorage.getItem(StorageKeys.NOTICES)) {
                saveStorageData(StorageKeys.NOTICES, initialData.notices);
            }
            
            if (!localStorage.getItem(StorageKeys.LOST_FOUND)) {
                saveStorageData(StorageKeys.LOST_FOUND, initialData.lostFound);
            }
            
            if (!localStorage.getItem(StorageKeys.SECONDHAND)) {
                saveStorageData(StorageKeys.SECONDHAND, initialData.secondhand);
            }
            
            if (!localStorage.getItem(StorageKeys.TIMETABLE)) {
                saveStorageData(StorageKeys.TIMETABLE, initialData.timetable);
            }
            
            if (!localStorage.getItem(StorageKeys.CURRENT_WEEK)) {
                saveStorageData(StorageKeys.CURRENT_WEEK, 1);
            }
        }

        // æ¨¡å—ç®¡ç†
        class ModuleManager {
            constructor() {
                this.modules = document.querySelectorAll('.module');
                this.navLinks = document.querySelectorAll('.nav-link');
                this.currentModule = 'notices';
                
                this.initNavigation();
                this.showModule(this.currentModule);
            }
            
            initNavigation() {
                this.navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const moduleId = link.getAttribute('data-module');
                        this.switchModule(moduleId);
                    });
                });
            }
            
            switchModule(moduleId) {
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                this.navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-module') === moduleId) {
                        link.classList.add('active');
                    }
                });
                
                // æ˜¾ç¤ºå¯¹åº”æ¨¡å—
                this.showModule(moduleId);
                this.currentModule = moduleId;
            }
            
            showModule(moduleId) {
                this.modules.forEach(module => {
                    if (module.id === moduleId) {
                        module.classList.add('active');
                    } else {
                        module.classList.remove('active');
                    }
                });
            }
        }

        // æ ¡å›­é€šçŸ¥æ¨¡å—
        class NoticesModule {
            constructor() {
                this.noticesList = document.getElementById('noticesList');
                this.addNoticeBtn = document.getElementById('addNoticeBtn');
                this.noticeSort = document.getElementById('noticeSort');
                
                this.init();
            }
            
            init() {
                this.renderNotices();
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                this.addNoticeBtn.addEventListener('click', () => this.showAddNoticeForm());
                this.noticeSort.addEventListener('change', () => this.renderNotices());
            }
            
            renderNotices() {
                const notices = getStorageData(StorageKeys.NOTICES);
                const sortBy = this.noticeSort.value;
                
                // æ’åº
                const sortedNotices = [...notices].sort((a, b) => {
                    const dateA = new Date(a.date);
                    const dateB = new Date(b.date);
                    return sortBy === 'newest' ? dateB - dateA : dateA - dateB;
                });
                
                // æ¸…ç©ºåˆ—è¡¨
                this.noticesList.innerHTML = '';
                
                if (sortedNotices.length === 0) {
                    this.noticesList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">ğŸ“¢</div>
                            <h3>æš‚æ— é€šçŸ¥</h3>
                            <p>ç‚¹å‡»"å‘å¸ƒæ–°é€šçŸ¥"æŒ‰é’®æ·»åŠ ç¬¬ä¸€æ¡æ ¡å›­é€šçŸ¥</p>
                        </div>
                    `;
                    return;
                }
                
                // æ¸²æŸ“é€šçŸ¥åˆ—è¡¨
                sortedNotices.forEach(notice => {
                    const noticeElement = document.createElement('div');
                    noticeElement.className = 'card notice-item';
                    noticeElement.innerHTML = `
                        <div class="notice-title">${notice.title}</div>
                        <div class="notice-date">å‘å¸ƒæ—¶é—´ï¼š${notice.date} | å‘å¸ƒè€…ï¼š${notice.publisher}</div>
                        <div class="notice-content">${notice.content}</div>
                    `;
                    this.noticesList.appendChild(noticeElement);
                });
            }
            
            showAddNoticeForm() {
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const modalOverlay = document.getElementById('modalOverlay');
                
                modalTitle.textContent = 'å‘å¸ƒæ–°é€šçŸ¥';
                modalBody.innerHTML = `
                    <form id="noticeForm">
                        <div class="form-group">
                            <label for="noticeTitle" class="form-label">é€šçŸ¥æ ‡é¢˜</label>
                            <input type="text" id="noticeTitle" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="noticePublisher" class="form-label">å‘å¸ƒè€…</label>
                            <input type="text" id="noticePublisher" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="noticeContent" class="form-label">é€šçŸ¥å†…å®¹</label>
                            <textarea id="noticeContent" class="form-control" required></textarea>
                        </div>
                        <div class="form-group" style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" class="btn btn-secondary" id="cancelNotice">å–æ¶ˆ</button>
                            <button type="submit" class="btn btn-primary">å‘å¸ƒé€šçŸ¥</button>
                        </div>
                    </form>
                `;
                
                modalOverlay.style.display = 'flex';
                
                // è¡¨å•æäº¤äº‹ä»¶
                document.getElementById('noticeForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addNotice();
                });
                
                // å–æ¶ˆæŒ‰é’®äº‹ä»¶
                document.getElementById('cancelNotice').addEventListener('click', () => {
                    modalOverlay.style.display = 'none';
                });
            }
            
            addNotice() {
                const title = document.getElementById('noticeTitle').value;
                const publisher = document.getElementById('noticePublisher').value;
                const content = document.getElementById('noticeContent').value;
                
                if (!title || !publisher || !content) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                    return;
                }
                
                // è·å–ç°æœ‰é€šçŸ¥
                const notices = getStorageData(StorageKeys.NOTICES);
                
                // åˆ›å»ºæ–°é€šçŸ¥
                const newNotice = {
                    id: notices.length > 0 ? Math.max(...notices.map(n => n.id)) + 1 : 1,
                    title,
                    content,
                    publisher,
                    date: new Date().toLocaleString('zh-CN', { 
                        year: 'numeric', 
                        month: '2-digit', 
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };
                
                // æ·»åŠ åˆ°æ•°ç»„å¹¶ä¿å­˜
                notices.unshift(newNotice);
                saveStorageData(StorageKeys.NOTICES, notices);
                
                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('modalOverlay').style.display = 'none';
                
                // é‡æ–°æ¸²æŸ“åˆ—è¡¨
                this.renderNotices();
            }
        }

        // å¤±ç‰©æ‹›é¢†æ¨¡å—
        class LostFoundModule {
            constructor() {
                this.lostFoundList = document.getElementById('lostFoundList');
                this.addLostBtn = document.getElementById('addLostBtn');
                this.addFoundBtn = document.getElementById('addFoundBtn');
                this.itemTypeFilter = document.getElementById('itemTypeFilter');
                this.statusFilter = document.getElementById('statusFilter');
                
                this.init();
            }
            
            init() {
                this.renderItems();
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                this.addLostBtn.addEventListener('click', () => this.showAddForm('lost'));
                this.addFoundBtn.addEventListener('click', () => this.showAddForm('found'));
                this.itemTypeFilter.addEventListener('change', () => this.renderItems());
                this.statusFilter.addEventListener('change', () => this.renderItems());
            }
            
            renderItems() {
                const items = getStorageData(StorageKeys.LOST_FOUND);
                const typeFilter = this.itemTypeFilter.value;
                const statusFilter = this.statusFilter.value;
                
                // è¿‡æ»¤
                let filteredItems = items;
                
                if (typeFilter !== 'all') {
                    filteredItems = filteredItems.filter(item => item.itemCategory === typeFilter);
                }
                
                if (statusFilter !== 'all') {
                    filteredItems = filteredItems.filter(item => item.type === statusFilter);
                }
                
                // æŒ‰æ—¶é—´å€’åºæ’åº
                filteredItems.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // æ¸…ç©ºåˆ—è¡¨
                this.lostFoundList.innerHTML = '';
                
                if (filteredItems.length === 0) {
                    this.lostFoundList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">ğŸ”</div>
                            <h3>æš‚æ— ä¿¡æ¯</h3>
                            <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å‘å¸ƒå¤±ç‰©æˆ–æ‹›é¢†ä¿¡æ¯</p>
                        </div>
                    `;
                    return;
                }
                
                // æ¸²æŸ“åˆ—è¡¨
                filteredItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'card item-card';
                    
                    const typeText = item.type === 'lost' ? 'ä¸¢å¤±' : 'æ‹¾åˆ°';
                    const typeClass = item.type === 'lost' ? 'lost' : 'found';
                    
                    // ç‰©å“ç±»å‹æ˜ å°„
                    const categoryMap = {
                        'card': 'å¡è¯ç±»',
                        'electronic': 'ç”µå­äº§å“',
                        'book': 'ä¹¦ç±æ–‡å…·',
                        'clothing': 'è¡£ç‰©é¥°å“',
                        'other': 'å…¶ä»–ç‰©å“'
                    };
                    
                    itemElement.innerHTML = `
                        <div class="item-info">
                            <h4>${item.itemName}</h4>
                            <div>
                                <span class="item-type ${typeClass}">${typeText}</span>
                                <span>${categoryMap[item.itemCategory] || item.itemCategory}</span>
                            </div>
                            <p>${item.description}</p>
                            <p>æ—¶é—´ï¼š${item.date} | åœ°ç‚¹ï¼š${item.location}</p>
                            <div class="contact-info">è”ç³»æ–¹å¼ï¼š${item.contact}</div>
                        </div>
                    `;
                    
                    this.lostFoundList.appendChild(itemElement);
                });
            }
            
            showAddForm(type) {
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const modalOverlay = document.getElementById('modalOverlay');
                
                const formTitle = type === 'lost' ? 'å‘å¸ƒä¸¢å¤±ä¿¡æ¯' : 'å‘å¸ƒæ‹¾ç‰©ä¿¡æ¯';
                modalTitle.textContent = formTitle;
                
                modalBody.innerHTML = `
                    <form id="itemForm">
                        <div class="form-group">
                            <label for="itemName" class="form-label">ç‰©å“åç§°</label>
                            <input type="text" id="itemName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="itemCategory" class="form-label">ç‰©å“ç±»å‹</label>
                            <select id="itemCategory" class="form-control" required>
                                <option value="">è¯·é€‰æ‹©ç‰©å“ç±»å‹</option>
                                <option value="card">å¡è¯ç±»</option>
                                <option value="electronic">ç”µå­äº§å“</option>
                                <option value="book">ä¹¦ç±æ–‡å…·</option>
                                <option value="clothing">è¡£ç‰©é¥°å“</option>
                                <option value="other">å…¶ä»–ç‰©å“</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemDescription" class="form-label">æè¿°ä¿¡æ¯</label>
                            <textarea id="itemDescription" class="form-control" required placeholder="è¯·æè¿°ç‰©å“ç‰¹å¾ã€ä¸¢å¤±/æ‹¾åˆ°åœ°ç‚¹ç­‰è¯¦ç»†ä¿¡æ¯"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="itemLocation" class="form-label">${type === 'lost' ? 'ä¸¢å¤±åœ°ç‚¹' : 'æ‹¾åˆ°åœ°ç‚¹'}</label>
                            <input type="text" id="itemLocation" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="itemContact" class="form-label">è”ç³»æ–¹å¼</label>
                            <input type="text" id="itemContact" class="form-control" required placeholder="ç”µè¯/å¾®ä¿¡/QQç­‰">
                        </div>
                        <input type="hidden" id="itemType" value="${type}">
                        <div class="form-group" style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" class="btn btn-secondary" id="cancelItem">å–æ¶ˆ</button>
                            <button type="submit" class="btn btn-primary">å‘å¸ƒä¿¡æ¯</button>
                        </div>
                    </form>
                `;
                
                modalOverlay.style.display = 'flex';
                
                // è¡¨å•æäº¤äº‹ä»¶
                document.getElementById('itemForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addItem(type);
                });
                
                // å–æ¶ˆæŒ‰é’®äº‹ä»¶
                document.getElementById('cancelItem').addEventListener('click', () => {
                    modalOverlay.style.display = 'none';
                });
            }
            
            addItem(type) {
                const itemName = document.getElementById('itemName').value;
                const itemCategory = document.getElementById('itemCategory').value;
                const itemDescription = document.getElementById('itemDescription').value;
                const itemLocation = document.getElementById('itemLocation').value;
                const itemContact = document.getElementById('itemContact').value;
                
                if (!itemName || !itemCategory || !itemDescription || !itemLocation || !itemContact) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                    return;
                }
                
                // è·å–ç°æœ‰æ•°æ®
                const items = getStorageData(StorageKeys.LOST_FOUND);
                
                // åˆ›å»ºæ–°è®°å½•
                const newItem = {
                    id: items.length > 0 ? Math.max(...items.map(item => item.id)) + 1 : 1,
                    type,
                    itemName,
                    itemCategory,
                    description: itemDescription,
                    contact: itemContact,
                    location: itemLocation,
                    date: new Date().toLocaleString('zh-CN', { 
                        year: 'numeric', 
                        month: '2-digit', 
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };
                
                // æ·»åŠ åˆ°æ•°ç»„å¹¶ä¿å­˜
                items.unshift(newItem);
                saveStorageData(StorageKeys.LOST_FOUND, items);
                
                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('modalOverlay').style.display = 'none';
                
                // é‡æ–°æ¸²æŸ“åˆ—è¡¨
                this.renderItems();
            }
        }

        // äºŒæ‰‹äº¤æ˜“æ¨¡å—
        class SecondhandModule {
            constructor() {
                this.productList = document.getElementById('productList');
                this.addProductBtn = document.getElementById('addProductBtn');
                this.categoryFilter = document.getElementById('categoryFilter');
                
                this.init();
            }
            
            init() {
                this.renderProducts();
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                this.addProductBtn.addEventListener('click', () => this.showAddProductForm());
                this.categoryFilter.addEventListener('change', () => this.renderProducts());
            }
            
            renderProducts() {
                const products = getStorageData(StorageKeys.SECONDHAND);
                const categoryFilter = this.categoryFilter.value;
                
                // è¿‡æ»¤
                let filteredProducts = products;
                
                if (categoryFilter !== 'all') {
                    filteredProducts = filteredProducts.filter(product => product.category === categoryFilter);
                }
                
                // æŒ‰æ—¶é—´å€’åºæ’åº
                filteredProducts.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // æ¸…ç©ºåˆ—è¡¨
                this.productList.innerHTML = '';
                
                if (filteredProducts.length === 0) {
                    this.productList.innerHTML = `
                        <div class="empty-state" style="grid-column: 1/-1;">
                            <div class="empty-icon">ğŸ›’</div>
                            <h3>æš‚æ— å•†å“</h3>
                            <p>ç‚¹å‡»"å‘å¸ƒå•†å“"æŒ‰é’®æ·»åŠ ç¬¬ä¸€ä¸ªäºŒæ‰‹å•†å“</p>
                        </div>
                    `;
                    return;
                }
                
                // æ¸²æŸ“å•†å“åˆ—è¡¨
                filteredProducts.forEach(product => {
                    // åˆ†ç±»æ˜ å°„
                    const categoryMap = {
                        'book': 'ä¹¦ç±èµ„æ–™',
                        'electronic': 'ç”µå­äº§å“',
                        'daily': 'ç”Ÿæ´»ç”¨å“',
                        'clothing': 'æœè£…é‹å¸½',
                        'other': 'å…¶ä»–'
                    };
                    
                    const productElement = document.createElement('div');
                    productElement.className = 'product-card card';
                    productElement.innerHTML = `
                        <div class="product-img">${product.image || 'ğŸ“¦'}</div>
                        <div class="product-body">
                            <div class="product-category">${categoryMap[product.category] || product.category}</div>
                            <div class="product-title">${product.name}</div>
                            <div class="product-price">Â¥${product.price}</div>
                            <div class="product-desc">${product.description}</div>
                            <div class="contact-info">å–å®¶ï¼š${product.contact}</div>
                            <div style="font-size: 0.85rem; color: #999; margin-top: 10px;">å‘å¸ƒæ—¶é—´ï¼š${product.date}</div>
                        </div>
                    `;
                    
                    this.productList.appendChild(productElement);
                });
            }
            
            showAddProductForm() {
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const modalOverlay = document.getElementById('modalOverlay');
                
                modalTitle.textContent = 'å‘å¸ƒäºŒæ‰‹å•†å“';
                modalBody.innerHTML = `
                    <form id="productForm">
                        <div class="form-group">
                            <label for="productName" class="form-label">å•†å“åç§°</label>
                            <input type="text" id="productName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="productPrice" class="form-label">ä»·æ ¼ï¼ˆå…ƒï¼‰</label>
                            <input type="number" id="productPrice" class="form-control" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="productCategory" class="form-label">å•†å“åˆ†ç±»</label>
                            <select id="productCategory" class="form-control" required>
                                <option value="">è¯·é€‰æ‹©åˆ†ç±»</option>
                                <option value="book">ä¹¦ç±èµ„æ–™</option>
                                <option value="electronic">ç”µå­äº§å“</option>
                                <option value="daily">ç”Ÿæ´»ç”¨å“</option>
                                <option value="clothing">æœè£…é‹å¸½</option>
                                <option value="other">å…¶ä»–</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productDescription" class="form-label">å•†å“æè¿°</label>
                            <textarea id="productDescription" class="form-control" required placeholder="è¯·æè¿°å•†å“çš„æ–°æ—§ç¨‹åº¦ã€åŠŸèƒ½çŠ¶å†µç­‰"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="productContact" class="form-label">è”ç³»æ–¹å¼</label>
                            <input type="text" id="productContact" class="form-control" required placeholder="ç”µè¯/å¾®ä¿¡/QQç­‰">
                        </div>
                        <div class="form-group">
                            <label for="productImage" class="form-label">å•†å“å›¾ç‰‡ï¼ˆå ä½ç¬¦ï¼‰</label>
                            <select id="productImage" class="form-control">
                                <option value="ğŸ“š">ä¹¦ç±ï¼šğŸ“š</option>
                                <option value="ğŸ’»">ç”µè„‘ï¼šğŸ’»</option>
                                <option value="ğŸ“±">æ‰‹æœºï¼šğŸ“±</option>
                                <option value="âŒ¨ï¸">é”®ç›˜ï¼šâŒ¨ï¸</option>
                                <option value="ğŸ§">è€³æœºï¼šğŸ§</option>
                                <option value="ğŸ‘•">è¡£ç‰©ï¼šğŸ‘•</option>
                                <option value="ğŸ‘Ÿ">é‹å­ï¼šğŸ‘Ÿ</option>
                                <option value="ğŸ’¡">å°ç¯ï¼šğŸ’¡</option>
                                <option value="ğŸ“¦">å…¶ä»–ï¼šğŸ“¦</option>
                            </select>
                        </div>
                        <div class="form-group" style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button type="button" class="btn btn-secondary" id="cancelProduct">å–æ¶ˆ</button>
                            <button type="submit" class="btn btn-primary">å‘å¸ƒå•†å“</button>
                        </div>
                    </form>
                `;
                
                modalOverlay.style.display = 'flex';
                
                // è¡¨å•æäº¤äº‹ä»¶
                document.getElementById('productForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addProduct();
                });
                
                // å–æ¶ˆæŒ‰é’®äº‹ä»¶
                document.getElementById('cancelProduct').addEventListener('click', () => {
                    modalOverlay.style.display = 'none';
                });
            }
            
            addProduct() {
                const productName = document.getElementById('productName').value;
                const productPrice = parseFloat(document.getElementById('productPrice').value);
                const productCategory = document.getElementById('productCategory').value;
                const productDescription = document.getElementById('productDescription').value;
                const productContact = document.getElementById('productContact').value;
                const productImage = document.getElementById('productImage').value;
                
                if (!productName || !productPrice || !productCategory || !productDescription || !productContact) {
                    alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ');
                    return;
                }
                
                if (productPrice <= 0) {
                    alert('ä»·æ ¼å¿…é¡»å¤§äº0');
                    return;
                }
                
                // è·å–ç°æœ‰æ•°æ®
                const products = getStorageData(StorageKeys.SECONDHAND);
                
                // åˆ›å»ºæ–°å•†å“
                const newProduct = {
                    id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
                    name: productName,
                    price: productPrice,
                    category: productCategory,
                    description: productDescription,
                    contact: productContact,
                    image: productImage,
                    date: new Date().toLocaleDateString('zh-CN')
                };
                
                // æ·»åŠ åˆ°æ•°ç»„å¹¶ä¿å­˜
                products.unshift(newProduct);
                saveStorageData(StorageKeys.SECONDHAND, products);
                
                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('modalOverlay').style.display = 'none';
                
                // é‡æ–°æ¸²æŸ“åˆ—è¡¨
                this.renderProducts();
            }
        }

        // è¯¾è¡¨æŸ¥è¯¢æ¨¡å—
        class TimetableModule {
            constructor() {
                this.timetableContent = document.getElementById('timetableContent');
                this.searchTimetableBtn = document.getElementById('searchTimetable');
                this.prevWeekBtn = document.getElementById('prevWeek');
                this.nextWeekBtn = document.getElementById('nextWeek');
                this.currentWeekBtn = document.getElementById('currentWeekBtn');
                this.currentWeekElement = document.getElementById('currentWeek');
                this.timetableInfo = document.getElementById('timetableInfo');
                this.majorSelect = document.getElementById('majorSelect');
                this.studentIdInput = document.getElementById('studentId');
                
                this.currentWeek = parseInt(getStorageData(StorageKeys.CURRENT_WEEK, 1));
                this.currentMajor = '';
                
                this.init();
            }
            
            init() {
                this.renderTimetable();
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                this.searchTimetableBtn.addEventListener('click', () => this.searchTimetable());
                this.prevWeekBtn.addEventListener('click', () => this.changeWeek(-1));
                this.nextWeekBtn.addEventListener('click', () => this.changeWeek(1));
                this.currentWeekBtn.addEventListener('click', () => this.goToCurrentWeek());
                
                // è¾“å…¥æ¡†å’Œä¸‹æ‹‰æ¡†è”åŠ¨
                this.majorSelect.addEventListener('change', () => {
                    if (this.majorSelect.value) {
                        this.studentIdInput.value = '';
                    }
                });
                
                this.studentIdInput.addEventListener('input', () => {
                    if (this.studentIdInput.value) {
                        this.majorSelect.value = '';
                    }
                });
            }
            
            searchTimetable() {
                const studentId = this.studentIdInput.value.trim();
                const major = this.majorSelect.value;
                
                if (!studentId && !major) {
                    alert('è¯·è¾“å…¥å­¦å·æˆ–é€‰æ‹©å¹´çº§ä¸“ä¸š');
                    return;
                }
                
                // å¦‚æœæœ‰å­¦å·ï¼Œæ ¹æ®å­¦å·åˆ¤æ–­ä¸“ä¸šï¼ˆç®€åŒ–é€»è¾‘ï¼‰
                if (studentId) {
                    // æ¨¡æ‹Ÿæ ¹æ®å­¦å·åˆ¤æ–­ä¸“ä¸š
                    if (studentId.startsWith('2021')) {
                        this.currentMajor = 'cs2021';
                    } else if (studentId.startsWith('2022')) {
                        this.currentMajor = 'cs2022';
                    } else {
                        this.currentMajor = 'cs2021'; // é»˜è®¤
                    }
                    
                    this.timetableInfo.textContent = `å­¦å·ï¼š${studentId}ï¼Œ${this.getMajorName(this.currentMajor)}`;
                } else if (major) {
                    this.currentMajor = major;
                    this.timetableInfo.textContent = this.getMajorName(major);
                }
                
                // é‡ç½®ä¸ºç¬¬1å‘¨
                this.currentWeek = 1;
                saveStorageData(StorageKeys.CURRENT_WEEK, this.currentWeek);
                
                this.renderTimetable();
            }
            
            getMajorName(majorKey) {
                const timetables = getStorageData(StorageKeys.TIMETABLE);
                return timetables[majorKey] ? timetables[majorKey].name : 'æœªçŸ¥ä¸“ä¸š';
            }
            
            changeWeek(change) {
                const newWeek = this.currentWeek + change;
                
                if (newWeek < 1) {
                    alert('å·²ç»æ˜¯ç¬¬ä¸€å‘¨äº†');
                    return;
                }
                
                // æ£€æŸ¥æ˜¯å¦æœ‰è¯¥å‘¨çš„è¯¾è¡¨æ•°æ®
                const timetables = getStorageData(StorageKeys.TIMETABLE);
                const majorData = timetables[this.currentMajor];
                
                if (majorData && newWeek > majorData.weeks.length) {
                    alert('æ²¡æœ‰æ›´å¤šå‘¨çš„è¯¾è¡¨æ•°æ®äº†');
                    return;
                }
                
                this.currentWeek = newWeek;
                saveStorageData(StorageKeys.CURRENT_WEEK, this.currentWeek);
                
                this.renderTimetable();
            }
            
            goToCurrentWeek() {
                this.currentWeek = 1;
                saveStorageData(StorageKeys.CURRENT_WEEK, this.currentWeek);
                this.renderTimetable();
            }
            
            renderTimetable() {
                this.currentWeekElement.textContent = `ç¬¬ ${this.currentWeek} å‘¨è¯¾è¡¨`;
                
                // å¦‚æœæ²¡æœ‰é€‰æ‹©ä¸“ä¸šï¼Œæ˜¾ç¤ºæç¤º
                if (!this.currentMajor) {
                    this.timetableContent.innerHTML = `
                        <div class="empty-state" style="padding: 40px;">
                            <div class="empty-icon">ğŸ“…</div>
                            <h3>è¯·æŸ¥è¯¢è¯¾è¡¨</h3>
                            <p>è¯·è¾“å…¥å­¦å·æˆ–é€‰æ‹©å¹´çº§ä¸“ä¸šåç‚¹å‡»"æŸ¥è¯¢è¯¾è¡¨"æŒ‰é’®</p>
                        </div>
                    `;
                    return;
                }
                
                // è·å–è¯¾è¡¨æ•°æ®
                const timetables = getStorageData(StorageKeys.TIMETABLE);
                const majorData = timetables[this.currentMajor];
                
                if (!majorData) {
                    this.timetableContent.innerHTML = `
                        <div class="empty-state" style="padding: 40px;">
                            <div class="empty-icon">ğŸ“…</div>
                            <h3>æš‚æ— è¯¾è¡¨æ•°æ®</h3>
                            <p>è¯¥å¹´çº§ä¸“ä¸šæš‚æ— è¯¾è¡¨æ•°æ®</p>
                        </div>
                    `;
                    return;
                }
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å½“å‰å‘¨çš„è¯¾è¡¨
                if (this.currentWeek > majorData.weeks.length) {
                    this.timetableContent.innerHTML = `
                        <div class="empty-state" style="padding: 40px;">
                            <div class="empty-icon">ğŸ“…</div>
                            <h3>æš‚æ— è¯¾è¡¨æ•°æ®</h3>
                            <p>ç¬¬ ${this.currentWeek} å‘¨æš‚æ— è¯¾è¡¨æ•°æ®</p>
                        </div>
                    `;
                    return;
                }
                
                // è·å–å½“å‰å‘¨çš„è¯¾è¡¨
                const weekTimetable = majorData.weeks[this.currentWeek - 1];
                
                // æ˜ŸæœŸå‡ çš„åç§°
                const weekdays = ['æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­', 'æ˜ŸæœŸæ—¥'];
                
                // ç”Ÿæˆè¯¾è¡¨HTML
                let timetableHTML = `
                    <table class="timetable">
                        <thead>
                            <tr>
                                <th>æ—¶é—´</th>
                                ${weekdays.map(day => `<th>${day}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                // å‡è®¾ä¸€å¤©æœ€å¤š8èŠ‚è¯¾
                for (let lesson = 0; lesson < 8; lesson++) {
                    timetableHTML += `<tr>`;
                    timetableHTML += `<td>${lesson + 1}-${lesson + 2}èŠ‚</td>`;
                    
                    // éå†æ¯ä¸€å¤©
                    for (let day = 0; day < 7; day++) {
                        timetableHTML += `<td>`;
                        
                        // è·å–è¯¥æ—¶é—´æ®µçš„è¯¾ç¨‹
                        const dayCourses = weekTimetable[day] || [];
                        const course = dayCourses.find(c => {
                            // ç®€å•åŒ¹é…è¯¾ç¨‹æ—¶é—´ï¼Œå®é™…åº”æ ¹æ®è¯¾ç¨‹æ—¶é—´è§£æ
                            const timeMatch = c.time.match(/(\d+)/);
                            if (timeMatch) {
                                const lessonNum = parseInt(timeMatch[1]);
                                return lessonNum === lesson + 1;
                            }
                            return false;
                        });
                        
                        if (course) {
                            timetableHTML += `
                                <div class="course-item">
                                    <div class="course-name">${course.name}</div>
                                    <div class="course-detail">${course.teacher}</div>
                                    <div class="course-detail">${course.classroom}</div>
                                </div>
                            `;
                        }
                        
                        timetableHTML += `</td>`;
                    }
                    
                    timetableHTML += `</tr>`;
                }
                
                timetableHTML += `
                        </tbody>
                    </table>
                `;
                
                this.timetableContent.innerHTML = timetableHTML;
            }
        }

        // ä¸»åº”ç”¨ç±»
        class CampusLifeApp {
            constructor() {
                // åˆå§‹åŒ–æ•°æ®
                initializeData();
                
                // åˆå§‹åŒ–æ¨¡å—ç®¡ç†å™¨
                this.moduleManager = new ModuleManager();
                
                // åˆå§‹åŒ–å„åŠŸèƒ½æ¨¡å—
                this.noticesModule = new NoticesModule();
                this.lostFoundModule = new LostFoundModule();
                this.secondhandModule = new SecondhandModule();
                this.timetableModule = new TimetableModule();
                
                // åˆå§‹åŒ–æ¨¡æ€æ¡†å…³é—­åŠŸèƒ½
                this.initModal();
                
                console.log('æ ¡å›­ç”Ÿæ´»åŠ©æ‰‹å·²åˆå§‹åŒ–');
            }
            
            initModal() {
                const modalOverlay = document.getElementById('modalOverlay');
                const closeModalBtn = document.getElementById('closeModal');
                
                // ç‚¹å‡»å…³é—­æŒ‰é’®å…³é—­æ¨¡æ€æ¡†
                closeModalBtn.addEventListener('click', () => {
                    modalOverlay.style.display = 'none';
                });
                
                // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
                modalOverlay.addEventListener('click', (e) => {
                    if (e.target === modalOverlay) {
                        modalOverlay.style.display = 'none';
                    }
                });
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new CampusLifeApp();
        });
    </script>
</body>
</html>